<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>逆関数と逆三角関数</title>
    <style>
        body {
            font-family: 'Hiragino Sans', 'Meiryo', sans-serif;
            line-height: 1.7;
            color: #333;
            max-width: 920px;
            margin: 0 auto;
            padding: 32px 20px 60px;
            background-color: #f8f9fb;
        }
        h1, h2, h3 {
            color: #1a237e;
            margin-top: 1.6em;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #1a237e;
            padding-bottom: 12px;
            margin-bottom: 36px;
        }
        h2 {
            border-left: 5px solid #1a237e;
            padding-left: 14px;
            font-size: 1.35rem;
        }
        h3 {
            font-size: 1.1rem;
        }
        .container {
            background-color: #ffffff;
            border-radius: 8px;
            padding: 28px 32px 44px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        .theorem, .definition, .proof, .note, .example {
            margin: 18px 0;
            padding: 16px 18px;
            border-radius: 6px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }
        .theorem {
            border-left: 5px solid #3498db;
        }
        .definition {
            border-left: 5px solid #16a085;
        }
        .proof {
            border-left: 5px solid #7f8c8d;
        }
        .note {
            border-left: 5px solid #4caf50;
            background-color: #eef7f0;
        }
        .example {
            border-left: 5px solid #2196f3;
            background-color: #edf5ff;
        }
        .formula {
            background-color: #f0f0f8;
            padding: 15px;
            border-radius: 6px;
            margin: 16px 0;
            overflow-x: auto;
            text-align: center;
            font-size: 1.05rem;
            font-family: 'Latin Modern Math', 'Cambria Math', serif;
        }
        ul, ol {
            padding-left: 24px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 18px 0;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px 12px;
            text-align: center;
        }
        th {
            background-color: #e8eaf6;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f7f7f7;
        }
        .graph {
            text-align: center;
            margin: 24px 0;
        }
        .graph svg {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            background-color: #fff;
            box-shadow: 0 2px 6px rgba(0,0,0,0.12);
        }
        .exercise-list {
            background-color: #fffbea;
            border-left: 5px solid #f1c40f;
            padding: 18px 22px;
            border-radius: 6px;
            margin: 22px 0;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            background-color: #f1f1f1;
            padding: 2px 4px;
            border-radius: 3px;
        }
        @media screen and (max-width: 640px) {
            body {
                padding: 24px 14px 40px;
            }
            h1 {
                font-size: 1.9rem;
            }
            h2 {
                font-size: 1.2rem;
                padding-left: 10px;
            }
            .container {
                padding: 22px 20px 34px;
            }
        }
        .katex-display { overflow-x: auto; overflow-y: hidden; }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.css" integrity="sha384-wcIxkf4k558fYv3mQPFEpCREUQueRFCZrCXCtiKU8aNVbN9ODdVcN3BwCAJ6pcBb" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/katex.min.js" integrity="sha384-hIoBPJpTUs74ddyc4bFZSM1TVlQDA60VBbJS0oA934VSz82sBx1X7kSx2ATBDIyd" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.10/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ],
                throwOnError : false
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <h1>逆関数と逆三角関数の基礎</h1>

        <h2>1. 逆関数の定義と単射性</h2>

        <div class="definition">
            <strong>逆関数の定義</strong>: 関数 $f: X \to Y$ が全単射（単射かつ全射）であるとき、逆関数 $f^{-1}: Y \to X$ が存在し、任意の $x \in X$, $y \in Y$ について
            $$f(f^{-1}(y)) = y, \quad f^{-1}(f(x)) = x$$
            が成り立つ。
        </div>

        <div class="note">
            グラフを直線 $y=x$ に関して折り返すと逆関数のグラフが得られる。点 $(a, b)$ が $f$ のグラフ上にあれば、点 $(b, a)$ が $f^{-1}$ のグラフ上に現れる。
        </div>

        <div class="theorem">
            <strong>単射性の判定</strong>: 実数の区間 $I$ 上の連続関数 $f$ が単調増加あるいは単調減少であれば、$f$ は単射であり、$f(I)$ 上に逆関数を持つ。
        </div>

        <div class="proof">
            <strong>証明の概略</strong>: $x_{1} < x_{2}$ とすると単調性から $f(x_{1}) \neq f(x_{2})$ が従い単射となる。中間値の定理により $f(I)$ 全体を連続的に埋め尽くすため、逆関数 $f^{-1}: f(I) \to I$ が定義できる。
        </div>

        <div class="example">
            <strong>例 1</strong>: $f(x) = x$ は恒等関数であり、自身が逆関数になる。<br>
            <strong>例 2</strong>: $f(x) = x^{2}$ は全実数では単射でなく逆関数を持たないが、$x \geq 0$ に制限すると単調増加となり $f^{-1}(y) = \sqrt{y}$ が得られる。
        </div>

        <h2>2. 逆関数の微分公式</h2>

        <div class="theorem">
            <strong>逆関数の導関数</strong>: 関数 $f$ が点 $x_{0}$ の近傍で微分可能で $f'(x_{0}) \neq 0$ とする。このとき $y_{0} = f(x_{0})$ の近傍で逆関数 $f^{-1}$ は微分可能であり、
            <div class="formula">
                $(f^{-1})'(y_{0}) = \dfrac{1}{f'(x_{0})} = \dfrac{1}{f'(f^{-1}(y_{0}))}$
            </div>
        </div>

        <div class="proof">
            <strong>導出</strong>: 恒等式 $f(f^{-1}(y)) = y$ を $y$ で微分すると連鎖律より
            $$f'(f^{-1}(y)) \cdot (f^{-1})'(y) = 1$$
            となる。$f'(f^{-1}(y))$ がゼロでない範囲では上式を解いて逆関数の導関数を得ることができる。
        </div>

        <div class="example">
            <strong>例</strong>: $f(x) = x^{2}$ ($x>0$) に対して $f'(x) = 2x$ なので、逆関数 $g(y) = \sqrt{y}$ の導関数は
            $$g'(y) = \frac{1}{f'(g(y))} = \frac{1}{2\sqrt{y}}$$
            となる。
        </div>

        <div class="note">
            $f'(x_{0})$ がゼロに近いと $(f^{-1})'(y_{0})$ は大きくなる。極値付近では逆関数のグラフが急激に立ち上がる点に注意する。
        </div>

        <h2>3. 典型的な逆関数の例</h2>

        <table>
            <thead>
                <tr>
                    <th>関数 $f(x)$</th>
                    <th>定義域</th>
                    <th>値域</th>
                    <th>逆関数</th>
                    <th>導関数</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>$x^{3}$</td>
                    <td>$\mathbb{R}$</td>
                    <td>$\mathbb{R}$</td>
                    <td>$\sqrt[3]{y}$</td>
                    <td>$\dfrac{1}{3\sqrt[3]{y^{2}}}$</td>
                </tr>
                <tr>
                    <td>$e^{x}$</td>
                    <td>$\mathbb{R}$</td>
                    <td>$(0, \infty)$</td>
                    <td>$\log y$</td>
                    <td>$\dfrac{1}{y}$</td>
                </tr>
                <tr>
                    <td>$\ln x$</td>
                    <td>$(0, \infty)$</td>
                    <td>$\mathbb{R}$</td>
                    <td>$e^{y}$</td>
                    <td>$e^{y}$</td>
                </tr>
            </tbody>
        </table>

        <div class="note">
            単調性を保つように定義域を適切に制限することで、多くの初等関数に対して逆関数を定義できる。
        </div>

        <h2>4. 逆三角関数の定義</h2>

        <div class="definition">
            <strong>逆三角関数</strong>: 周期性を持つ三角関数から単射な部分を取り出すことで逆関数を定義する。標準的な範囲は次の通りである。
        </div>

        <table>
            <thead>
                <tr>
                    <th>逆関数</th>
                    <th>対応する三角関数</th>
                    <th>値域</th>
                    <th>定義域</th>
                    <th>特徴</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>$\arcsin x$</td>
                    <td>$\sin y$ ($y \in [-\tfrac{\pi}{2}, \tfrac{\pi}{2}]$)</td>
                    <td>$[-\tfrac{\pi}{2}, \tfrac{\pi}{2}]$</td>
                    <td>$[-1, 1]$</td>
                    <td>奇関数で単調増加</td>
                </tr>
                <tr>
                    <td>$\arccos x$</td>
                    <td>$\cos y$ ($y \in [0, \pi]$)</td>
                    <td>$[0, \pi]$</td>
                    <td>$[-1, 1]$</td>
                    <td>単調減少</td>
                </tr>
                <tr>
                    <td>$\arctan x$</td>
                    <td>$\tan y$ ($y \in (-\tfrac{\pi}{2}, \tfrac{\pi}{2})$)</td>
                    <td>$(-\tfrac{\pi}{2}, \tfrac{\pi}{2})$</td>
                    <td>$\mathbb{R}$</td>
                    <td>両端で漸近線を持つ</td>
                </tr>
            </tbody>
        </table>

        <div class="graph">
            <svg width="420" height="280" viewBox="-40 -40 420 280">
                <line x1="0" y1="200" x2="360" y2="200" stroke="#444" />
                <line x1="120" y1="0" x2="120" y2="260" stroke="#444" />
                <text x="350" y="220">x</text>
                <text x="105" y="15">y</text>
                <path d="M 20 40 C 70 80, 110 140, 120 200 C 130 260, 220 320, 320 340" stroke="#1565c0" fill="none" stroke-width="2" />
                <path d="M 20 360 C 70 300, 140 220, 200 200 C 260 180, 310 140, 320 40" stroke="#c62828" fill="none" stroke-width="2" />
                <path d="M 20 320 C 80 260, 120 220, 120 200 C 120 180, 200 120, 320 80" stroke="#2e7d32" fill="none" stroke-width="2" />
                <text x="290" y="60" fill="#1565c0">y = \arcsin(x)</text>
                <text x="290" y="245" fill="#c62828">y = \arccos(x)</text>
                <text x="290" y="95" fill="#2e7d32">y = \arctan(x)</text>
            </svg>
        </div>

        <h2>5. 逆三角関数の導関数</h2>

        <div class="theorem">
            <strong>導関数の公式</strong>:
            <div class="formula">
                $(\arcsin x)' = \dfrac{1}{\sqrt{1 - x^{2}}}, \quad (\arccos x)' = -\dfrac{1}{\sqrt{1 - x^{2}}}, \quad (\arctan x)' = \dfrac{1}{1 + x^{2}}$
            </div>
        </div>

        <div class="proof">
            <strong>証明のヒント</strong>: 恒等式 $\sin(\arcsin x) = x$ を微分すると
            $$\cos(\arcsin x) \cdot (\arcsin x)' = 1$$
            となる。単位円の関係 $\cos(\arcsin x) = \sqrt{1 - x^{2}}$ を用いれば導関数が得られる。他の逆三角関数についても同様に導出できる。
        </div>

        <div class="example">
            <strong>例</strong>: $y = \arctan x$ のグラフは $x \to \pm\infty$ で $\pm \tfrac{\pi}{2}$ に近づく。導関数 $(\arctan x)' = 1/(1+x^{2})$ は $x$ が大きくなるとゼロに近づき、漸近線に近づく速度を表す。
        </div>

        <h2>6. 応用と演習</h2>

        <div class="note">
            逆関数や逆三角関数は極限評価、積分計算、微分方程式の解、確率分布の解析など幅広い分野で現れる。公式を丸暗記するだけでなく、定義から導けるようにしておくと応用力が高まる。
        </div>

        <div class="exercise-list">
            <ol>
                <li>$f(x) = x + e^{x}$ が単調増加であることを示し、逆関数の定義域・値域を求めたうえで $(f^{-1})'(1)$ を計算せよ。</li>
                <li>$\arcsin x + \arccos x$ が定数であることを証明し、その値を求めよ。</li>
                <li>$g(x) = \arctan(\sqrt{x})$ の導関数を求め、合成関数と逆関数の微分公式の使い分けを練習せよ。</li>
            </ol>
        </div>
    </div>
</body>
</html>
